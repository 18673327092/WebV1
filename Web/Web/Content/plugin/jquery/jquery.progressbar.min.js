(function (a) { a.extend({ progressBar: new function () { this.defaults = { increment: 2, speed: 15, showText: true, width: 120, boxImage: "images/progressbar.gif", barImage: "images/progressbg_green.gif", height: 12 }; this.construct = function (d, c) { var b = null; var e = null; if (d != null) { if (!isNaN(d)) { b = d; if (c != null) { e = c; } } else { e = d; } } return this.each(function (f) { var l = this; if (b != null && this.bar != null && this.config != null) { this.config.tpercentage = b; if (e != null) { l.config = a.extend(this.config, e); } } else { var j = a(this); var h = a.extend({}, a.progressBar.defaults, e); var o = b; if (b == null) { var o = j.html().replace("%", ""); } j.html(""); var i = document.createElement("img"); var m = document.createElement("span"); i.id = this.id + "_percentImage"; m.id = this.id + "_percentText"; i.src = h.boxImage; i.width = h.width; var g = a(i); var k = a(m); this.bar = g; this.ntext = k; this.config = h; this.config.cpercentage = 0; this.config.tpercentage = o; g.css("width", h.width + "px"); g.css("height", h.height + "px"); g.css("background-image", "url(" + h.barImage + ")"); g.css("padding", "0"); g.css("margin", "0"); j.append(g); j.append(k); i.alt = ""; i.title = ""; } var n = setInterval(function () { var s = l.config; var q = parseInt(s.cpercentage); var r = parseInt(s.tpercentage); var p = parseInt(s.increment); var t = l.bar; var u = l.ntext; var v = s.width / 100; t.css("background-position", (((s.width * -1)) + (q * v)) + "px 50%"); if (s.showText) { u.html(" " + Math.round(q) + "%"); } if (q > r) { if (q - p < r) { l.config.cpercentage = 0 + r; } else { l.config.cpercentage -= p; } } else { if (l.config.cpercentage < l.config.tpercentage) { if (q + p > r) { l.config.cpercentage = r; } else { l.config.cpercentage += p; } } else { clearInterval(n); } } }, l.config.speed); }); }; } }); a.fn.extend({ progressBar: a.progressBar.construct }); })(jQuery);